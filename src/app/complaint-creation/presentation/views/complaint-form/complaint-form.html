<div class="complaint-container">
  <!-- Header -->
  <div class="header">
    <h1 class="title">{{ 'COMPLAINT_FORM.TITLE' | translate }}</h1>
    <p class="subtitle">{{ 'COMPLAINT_FORM.SUBTITLE' | translate }}</p>
  </div>

  <div class="content-wrapper">
    <!-- Formulario Principal -->
    <form [formGroup]="form" (ngSubmit)="submitComplaint()" class="complaint-form">

      <!-- Sección 1: Categoría y Ubicación -->
      <div class="form-section">
        <div class="section-header">
          <div class="section-number">1</div>
          <h2 class="section-title">{{ 'COMPLAINT_FORM.SECTIONS.CATEGORY_LOCATION' | translate }}</h2>
        </div>

        <div class="form-row">
          <!-- Categoría -->
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>{{ 'COMPLAINT_FORM.FIELDS.CATEGORY.LABEL' | translate }}</mat-label>
            <mat-select formControlName="category">
              <mat-option value="">{{ 'COMPLAINT_FORM.FIELDS.CATEGORY.PLACEHOLDER' | translate }}</mat-option>
              <mat-option value="Infrastructure and Public Spaces">
                {{ 'COMPLAINT_FORM.FIELDS.CATEGORY.OPTIONS.INFRASTRUCTURE' | translate }}
              </mat-option>
              <mat-option value="Environment">
                {{ 'COMPLAINT_FORM.FIELDS.CATEGORY.OPTIONS.ENVIRONMENT' | translate }}
              </mat-option>
              <mat-option value="Citizen Security">
                {{ 'COMPLAINT_FORM.FIELDS.CATEGORY.OPTIONS.SECURITY' | translate }}
              </mat-option>
              <mat-option value="Transport and Mobility">
                {{ 'COMPLAINT_FORM.FIELDS.CATEGORY.OPTIONS.TRANSPORT' | translate }}
              </mat-option>
              <mat-option value="Public Health">
                {{ 'COMPLAINT_FORM.FIELDS.CATEGORY.OPTIONS.HEALTH' | translate }}
              </mat-option>
              <mat-option value="Urban Cleaning">
                {{ 'COMPLAINT_FORM.FIELDS.CATEGORY.OPTIONS.CLEANING' | translate }}
              </mat-option>
              <mat-option value="Public Transportation">
                {{ 'COMPLAINT_FORM.FIELDS.CATEGORY.OPTIONS.PUBLIC_TRANSPORT' | translate }}
              </mat-option>
              <mat-option value="Others">
                {{ 'COMPLAINT_FORM.FIELDS.CATEGORY.OPTIONS.OTHERS' | translate }}
              </mat-option>
            </mat-select>
            <mat-icon matSuffix>category</mat-icon>
          </mat-form-field>

          <!-- Prioridad -->
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>{{ 'COMPLAINT_FORM.FIELDS.PRIORITY.LABEL' | translate }}</mat-label>
            <mat-select formControlName="priority">
              <mat-option value="">{{ 'COMPLAINT_FORM.FIELDS.PRIORITY.PLACEHOLDER' | translate }}</mat-option>
              <mat-option value="Standard">
                <div class="priority-option">
                  <span class="priority-indicator standard"></span>
                  {{ 'COMPLAINT_FORM.FIELDS.PRIORITY.OPTIONS.STANDARD' | translate }}
                </div>
              </mat-option>
              <mat-option value="Urgent">
                <div class="priority-option">
                  <span class="priority-indicator urgent"></span>
                  {{ 'COMPLAINT_FORM.FIELDS.PRIORITY.OPTIONS.URGENT' | translate }}
                </div>
              </mat-option>
              <mat-option value="Critical">
                <div class="priority-option">
                  <span class="priority-indicator critical"></span>
                  {{ 'COMPLAINT_FORM.FIELDS.PRIORITY.OPTIONS.CRITICAL' | translate }}
                </div>
              </mat-option>
            </mat-select>
            <mat-icon matSuffix>flag</mat-icon>
          </mat-form-field>
        </div>

        <!-- Ubicación -->
        <div class="location-section">
          <h3 class="location-title">{{ 'COMPLAINT_FORM.FIELDS.LOCATION.TITLE' | translate }}</h3>
          <div class="location-grid">
            <!-- Departamento -->
            <mat-form-field appearance="outline">
              <mat-label>{{ 'COMPLAINT_FORM.FIELDS.LOCATION.DEPARTMENT.LABEL' | translate }}</mat-label>
              <mat-select formControlName="department">
                <mat-option value="">{{ 'COMPLAINT_FORM.FIELDS.LOCATION.DEPARTMENT.PLACEHOLDER' | translate }}</mat-option>
                <mat-option *ngFor="let departamento of departamentos" [value]="departamento.codigo">
                  {{ departamento.nombre }}
                </mat-option>
              </mat-select>
              <mat-icon matSuffix>map</mat-icon>
            </mat-form-field>

            <!-- Provincia -->
            <mat-form-field appearance="outline">
              <mat-label>{{ 'COMPLAINT_FORM.FIELDS.LOCATION.PROVINCE.LABEL' | translate }}</mat-label>
              <mat-select formControlName="province" [disabled]="!provincias.length">
                <mat-option value="">{{ 'COMPLAINT_FORM.FIELDS.LOCATION.PROVINCE.PLACEHOLDER' | translate }}</mat-option>
                <mat-option *ngFor="let provincia of provincias" [value]="provincia.codigo">
                  {{ provincia.nombre }}
                </mat-option>
              </mat-select>
              <mat-icon matSuffix>location_city</mat-icon>
            </mat-form-field>

            <!-- Distrito -->
            <mat-form-field appearance="outline">
              <mat-label>{{ 'COMPLAINT_FORM.FIELDS.LOCATION.DISTRICT.LABEL' | translate }}</mat-label>
              <mat-select formControlName="district" [disabled]="!distritos.length">
                <mat-option value="">{{ 'COMPLAINT_FORM.FIELDS.LOCATION.DISTRICT.PLACEHOLDER' | translate }}</mat-option>
                <mat-option *ngFor="let distrito of distritos" [value]="distrito.codigo">
                  {{ distrito.nombre }}
                </mat-option>
              </mat-select>
              <mat-icon matSuffix>place</mat-icon>
            </mat-form-field>
          </div>
        </div>
      </div>

      <!-- Línea divisoria -->
      <div class="divider"></div>

      <!-- Sección 2: Referencia -->
      <div class="form-section">
        <div class="section-header">
          <div class="section-number">2</div>
          <h2 class="section-title">{{ 'COMPLAINT_FORM.SECTIONS.REFERENCE' | translate }}</h2>
        </div>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>{{ 'COMPLAINT_FORM.FIELDS.REFERENCE.LABEL' | translate }}</mat-label>
          <input
            matInput
            type="text"
            formControlName="referenceInfo"
            [placeholder]="'COMPLAINT_FORM.FIELDS.REFERENCE.PLACEHOLDER' | translate"
          >
          <mat-icon matSuffix>location_on</mat-icon>
        </mat-form-field>
      </div>

      <!-- Línea divisoria -->
      <div class="divider"></div>

      <!-- Sección 3: Descripción -->
      <div class="form-section">
        <div class="section-header">
          <div class="section-number">3</div>
          <h2 class="section-title">{{ 'COMPLAINT_FORM.SECTIONS.DESCRIPTION' | translate }}</h2>
        </div>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>{{ 'COMPLAINT_FORM.FIELDS.DESCRIPTION.LABEL' | translate }}</mat-label>
          <textarea
            matInput
            formControlName="description"
            [placeholder]="'COMPLAINT_FORM.FIELDS.DESCRIPTION.PLACEHOLDER' | translate"
            rows="5"
          ></textarea>
          <mat-icon matSuffix>description</mat-icon>
          <mat-hint>{{ 'COMPLAINT_FORM.FIELDS.DESCRIPTION.HINT' | translate }}</mat-hint>
        </mat-form-field>
      </div>

      <!-- Línea divisoria -->
      <div class="divider"></div>

      <!-- Sección 4: Evidencias -->
      <div class="form-section">
        <div class="section-header">
          <div class="section-number">4</div>
          <h2 class="section-title">{{ 'COMPLAINT_FORM.SECTIONS.EVIDENCE' | translate }}</h2>
        </div>

        <div class="evidence-section">
          <!-- URLs de evidencias -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>{{ 'COMPLAINT_FORM.FIELDS.EVIDENCE.LABEL' | translate }}</mat-label>
            <input
              matInput
              type="text"
              formControlName="evidence"
              [placeholder]="'COMPLAINT_FORM.FIELDS.EVIDENCE.PLACEHOLDER' | translate"
            >
            <mat-icon matSuffix>link</mat-icon>
            <mat-hint>{{ 'COMPLAINT_FORM.FIELDS.EVIDENCE.HINT' | translate }}</mat-hint>
          </mat-form-field>
        </div>
      </div>

      <!-- Línea divisoria -->
      <div class="divider"></div>

      <!-- Sección 5: Opciones -->
      <div class="form-section">
        <div class="section-header">
          <div class="section-number">5</div>
          <h2 class="section-title">{{ 'COMPLAINT_FORM.SECTIONS.OPTIONS' | translate }}</h2>
        </div>

        <div class="options-section">
          <!-- Checkboxes -->
          <div class="checkbox-group">
            <mat-checkbox formControlName="anonymous" class="option-checkbox">
              <div class="checkbox-content">
                <mat-icon>visibility_off</mat-icon>
                <div class="checkbox-text">
                  <div class="checkbox-label">{{ 'COMPLAINT_FORM.OPTIONS.ANONYMOUS.LABEL' | translate }}</div>
                  <div class="checkbox-description">{{ 'COMPLAINT_FORM.OPTIONS.ANONYMOUS.DESCRIPTION' | translate }}</div>
                </div>
              </div>
            </mat-checkbox>

            <mat-checkbox formControlName="termsAccepted" class="option-checkbox terms-checkbox">
              <div class="checkbox-content">
                <mat-icon>verified_user</mat-icon>
                <div class="checkbox-text">
                  <div class="checkbox-label">{{ 'COMPLAINT_FORM.OPTIONS.TERMS.LABEL' | translate }}</div>
                  <div class="checkbox-description">{{ 'COMPLAINT_FORM.OPTIONS.TERMS.DESCRIPTION' | translate }}</div>
                </div>
              </div>
            </mat-checkbox>
          </div>

          <!-- Mensaje de error para términos -->
          <mat-error *ngIf="form.get('termsAccepted')?.invalid && form.get('termsAccepted')?.touched"
                     class="terms-error">
            {{ 'COMPLAINT_FORM.OPTIONS.TERMS_ERROR' | translate }}
          </mat-error>
        </div>
      </div>

      <!-- Botones de acción -->
      <div class="action-buttons">
        <button
          mat-raised-button
          color="primary"
          type="submit"
          [disabled]="form.invalid"
          class="submit-btn"
        >
          <mat-icon>send</mat-icon>
          {{ 'COMPLAINT_FORM.BUTTONS.SUBMIT' | translate }}
        </button>

        <button
          mat-stroked-button
          type="button"
          (click)="saveDraft()"
          class="draft-btn"
        >
          <mat-icon>save</mat-icon>
          {{ 'COMPLAINT_FORM.BUTTONS.SAVE_DRAFT' | translate }}
        </button>
      </div>

      <!-- Estado del formulario -->
      <div *ngIf="form.invalid" class="form-status">
        <mat-icon>info</mat-icon>
        <span>{{ 'COMPLAINT_FORM.VALIDATION.REQUIRED_FIELDS' | translate }}</span>
      </div>
    </form>

    <!-- Panel lateral de imagen -->
    <div class="image-panel">
      <div class="image-content">
        <img src="/secret-image.png" alt="Ilustración de denuncia" class="side-image">
        <div class="image-info">
          <h3>{{ 'COMPLAINT_FORM.SIDEBAR.TITLE' | translate }}</h3>
          <p>{{ 'COMPLAINT_FORM.SIDEBAR.DESCRIPTION' | translate }}</p>
          <div class="benefits">
            <div class="benefit-item">
              <mat-icon>security</mat-icon>
              <span>{{ 'COMPLAINT_FORM.SIDEBAR.BENEFITS.SECURITY' | translate }}</span>
            </div>
            <div class="benefit-item">
              <mat-icon>speed</mat-icon>
              <span>{{ 'COMPLAINT_FORM.SIDEBAR.BENEFITS.SPEED' | translate }}</span>
            </div>
            <div class="benefit-item">
              <mat-icon>groups</mat-icon>
              <span>{{ 'COMPLAINT_FORM.SIDEBAR.BENEFITS.COMMUNITY' | translate }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
