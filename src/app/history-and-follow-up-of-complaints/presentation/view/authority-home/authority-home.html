<div class="authority-home" role="main" aria-label="Authority Dashboard">
  <header class="welcome-header" aria-labelledby="welcome-title">
    <h1 id="welcome-title" class="welcome-title">Welcome</h1>
    <p class="welcome-subtitle">
      Hello <span class="user-name">{{ userName }}</span>, here is the summary of citizen complaints
    </p>
  </header>

  <div *ngIf="isLoading" class="loading-state" role="status" aria-live="polite">
    <p>Loading data...</p>
  </div>

  <div *ngIf="errorMessage && !isLoading" class="error-state" role="alert" aria-live="assertive">
    <p>{{ errorMessage }}</p>
    <button (click)="loadComplaintsData()" class="retry-button" aria-label="Retry loading complaints">Retry</button>
  </div>

  <section *ngIf="!isLoading && !errorMessage" class="stats-grid" aria-label="Complaints summary statistics">
    <div class="stat-card" role="group" aria-label="Total complaints">
      <div class="stat-icon total-icon">
        <span class="icon" aria-hidden="true">ğŸ“Š</span>
      </div>
      <div class="stat-content">
        <h3 class="stat-title">Total Complaints</h3>
        <p class="stat-number" aria-label="Total number of complaints">{{ totalComplaints }}</p>
      </div>
    </div>

    <div class="stat-card" role="group" aria-label="Pending complaints">
      <div class="stat-icon pending-icon">
        <span class="icon" aria-hidden="true">â³</span>
      </div>
      <div class="stat-content">
        <h3 class="stat-title">Pending</h3>
        <p class="stat-number" aria-label="Number of pending complaints">{{ pendingComplaints }}</p>
      </div>
    </div>

    <div class="stat-card" role="group" aria-label="Resolved complaints">
      <div class="stat-icon resolved-icon">
        <span class="icon" aria-hidden="true">âœ…</span>
      </div>
      <div class="stat-content">
        <h3 class="stat-title">Resolved</h3>
        <p class="stat-number" aria-label="Number of resolved complaints">{{ resolvedComplaints }}</p>
      </div>
    </div>

    <div class="stat-card" role="group" aria-label="District with the most complaints">
      <div class="stat-icon district-icon">
        <span class="icon" aria-hidden="true">ğŸ™ï¸</span>
      </div>
      <div class="stat-content">
        <h3 class="stat-title">District with Most Complaints</h3>
        <p class="stat-district" aria-label="District with the most complaints">{{ districtWithMostComplaints }}</p>
      </div>
    </div>

    <div class="stat-card" role="group" aria-label="Most common complaint category">
      <div class="stat-icon category-icon">
        <span class="icon" aria-hidden="true">ğŸ“‘</span>
      </div>
      <div class="stat-content">
        <h3 class="stat-title">Most Common Category</h3>
        <p class="stat-district" aria-label="Most common category">{{ mostCommonCategory }}</p>
      </div>
    </div>
  </section>
</div>

<div class="charts-container" *ngIf="!isLoading && !errorMessage" role="region" aria-label="Complaints analytics charts">
  <div class="chart-card" role="group" aria-label="Complaint status distribution">
    <div class="chart-wrapper">
      <p-chart
        type="pie"
        [data]="statusChartData"
        [options]="statusChartOptions"
        [style]="{'width': '100%', 'height': '300px'}"
        aria-label="Pie chart showing the proportion of complaints by status"
      ></p-chart>
    </div>
  </div>

  <div class="chart-card" role="group" aria-label="Complaints by category">
    <div class="chart-wrapper">
      <p-chart
        type="bar"
        [data]="categoryChartData"
        [options]="categoryChartOptions"
        [style]="{'width': '100%', 'height': '300px'}"
        aria-label="Bar chart showing the number of complaints by category"
      ></p-chart>
    </div>
  </div>
</div>
