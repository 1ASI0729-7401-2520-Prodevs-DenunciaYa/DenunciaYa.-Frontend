<div class="authority-home" role="main" [attr.aria-label]="'DASHBOARD.MAIN_LABEL' | translate">
  <header class="welcome-header" aria-labelledby="welcome-title">
    <h1 id="welcome-title" class="welcome-title">{{ 'DASHBOARD.WELCOME.TITLE' | translate }}</h1>
    <p class="welcome-subtitle">
      {{ 'DASHBOARD.WELCOME.SUBTITLE' | translate: { userName: userName } }}
    </p>
  </header>

  <div *ngIf="isLoading" class="loading-state" role="status" aria-live="polite">
    <p>{{ 'DASHBOARD.STATES.LOADING' | translate }}</p>
  </div>

  <div *ngIf="errorMessage && !isLoading" class="error-state" role="alert" aria-live="assertive">
    <p>{{ errorMessage }}</p>
    <button
      (click)="loadComplaintsData()"
      class="retry-button"
      [attr.aria-label]="'DASHBOARD.STATES.RETRY' | translate"
    >
      {{ 'DASHBOARD.STATES.RETRY' | translate }}
    </button>
  </div>

  <section *ngIf="!isLoading && !errorMessage" class="stats-grid" [attr.aria-label]="'DASHBOARD.STATS.SECTION_LABEL' | translate">
    <div class="stat-card" role="group" [attr.aria-label]="'DASHBOARD.STATS.TOTAL_COMPLAINTS.ARIA_LABEL' | translate">
      <div class="stat-icon total-icon">
        <span class="icon" aria-hidden="true">üìä</span>
      </div>
      <div class="stat-content">
        <h3 class="stat-title">{{ 'DASHBOARD.STATS.TOTAL_COMPLAINTS.TITLE' | translate }}</h3>
        <p class="stat-number" [attr.aria-label]="'DASHBOARD.STATS.TOTAL_COMPLAINTS.ARIA_LABEL' | translate">
          {{ totalComplaints }}
        </p>
      </div>
    </div>

    <div class="stat-card" role="group" [attr.aria-label]="'DASHBOARD.STATS.PENDING.ARIA_LABEL' | translate">
      <div class="stat-icon pending-icon">
        <span class="icon" aria-hidden="true">‚è≥</span>
      </div>
      <div class="stat-content">
        <h3 class="stat-title">{{ 'DASHBOARD.STATS.PENDING.TITLE' | translate }}</h3>
        <p class="stat-number" [attr.aria-label]="'DASHBOARD.STATS.PENDING.ARIA_LABEL' | translate">
          {{ pendingComplaints }}
        </p>
      </div>
    </div>

    <div class="stat-card" role="group" [attr.aria-label]="'DASHBOARD.STATS.RESOLVED.ARIA_LABEL' | translate">
      <div class="stat-icon resolved-icon">
        <span class="icon" aria-hidden="true">‚úÖ</span>
      </div>
      <div class="stat-content">
        <h3 class="stat-title">{{ 'DASHBOARD.STATS.RESOLVED.TITLE' | translate }}</h3>
        <p class="stat-number" [attr.aria-label]="'DASHBOARD.STATS.RESOLVED.ARIA_LABEL' | translate">
          {{ resolvedComplaints }}
        </p>
      </div>
    </div>

    <div class="stat-card" role="group" [attr.aria-label]="'DASHBOARD.STATS.DISTRICT_MOST_COMPLAINTS.ARIA_LABEL' | translate">
      <div class="stat-icon district-icon">
        <span class="icon" aria-hidden="true">üèôÔ∏è</span>
      </div>
      <div class="stat-content">
        <h3 class="stat-title">{{ 'DASHBOARD.STATS.DISTRICT_MOST_COMPLAINTS.TITLE' | translate }}</h3>
        <p class="stat-district" [attr.aria-label]="'DASHBOARD.STATS.DISTRICT_MOST_COMPLAINTS.ARIA_LABEL' | translate">
          {{ districtWithMostComplaints }}
        </p>
      </div>
    </div>

    <div class="stat-card" role="group" [attr.aria-label]="'DASHBOARD.STATS.MOST_COMMON_CATEGORY.ARIA_LABEL' | translate">
      <div class="stat-icon category-icon">
        <span class="icon" aria-hidden="true">üìë</span>
      </div>
      <div class="stat-content">
        <h3 class="stat-title">{{ 'DASHBOARD.STATS.MOST_COMMON_CATEGORY.TITLE' | translate }}</h3>
        <p class="stat-district" [attr.aria-label]="'DASHBOARD.STATS.MOST_COMMON_CATEGORY.ARIA_LABEL' | translate">
          {{ mostCommonCategory }}
        </p>
      </div>
    </div>
  </section>
</div>

<div class="charts-container" *ngIf="!isLoading && !errorMessage" role="region" [attr.aria-label]="'DASHBOARD.CHARTS.SECTION_LABEL' | translate">
  <div class="chart-card" role="group" [attr.aria-label]="'DASHBOARD.CHARTS.STATUS_DISTRIBUTION.LABEL' | translate">
    <div class="chart-wrapper">
      <p-chart
        type="pie"
        [data]="statusChartData"
        [options]="statusChartOptions"
        [style]="{'width': '100%', 'height': '300px'}"
        [attr.aria-label]="'DASHBOARD.CHARTS.STATUS_DISTRIBUTION.ARIA_LABEL' | translate"
      ></p-chart>
    </div>
  </div>

  <div class="chart-card" role="group" [attr.aria-label]="'DASHBOARD.CHARTS.BY_CATEGORY.LABEL' | translate">
    <div class="chart-wrapper">
      <p-chart
        type="bar"
        [data]="categoryChartData"
        [options]="categoryChartOptions"
        [style]="{'width': '100%', 'height': '300px'}"
        [attr.aria-label]="'DASHBOARD.CHARTS.BY_CATEGORY.ARIA_LABEL' | translate"
      ></p-chart>
    </div>
  </div>
</div>
