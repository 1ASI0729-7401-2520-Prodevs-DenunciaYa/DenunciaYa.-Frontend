<div class="profile-container">
  <div class="profile-content">

    <div class="profile-left">
      <h1>{{ 'PROFILE.TITLE' | translate }}</h1>
      <p class="subtitle">
        {{ 'PROFILE.SUBTITLE' | translate }}
        <span class="user-role-badge">{{ userRole | titlecase }}</span>
      </p>

      <div class="user-info-summary" *ngIf="currentUser">
        <p><strong>User ID:</strong> {{ currentUser.id }}</p>
        <p><strong>Plan:</strong> {{ currentUser.plan || 'No plan selected' }}</p>
        <p><strong>Payment Status:</strong> {{ currentUser.paymentStatus }}</p>
      </div>

      <form [formGroup]="profileForm" [attr.aria-label]="'PROFILE.ARIA_LABELS.FORM' | translate">
        <mat-form-field appearance="fill" class="input-field">
          <mat-label>{{ 'PROFILE.FIELDS.FIRST_NAME' | translate }}</mat-label>
          <input
            matInput
            formControlName="firstName"
            [attr.aria-label]="'PROFILE.ARIA_LABELS.FIRST_NAME' | translate"
          />
        </mat-form-field>

        <mat-form-field appearance="fill" class="input-field">
          <mat-label>{{ 'PROFILE.FIELDS.LAST_NAME' | translate }}</mat-label>
          <input
            matInput
            formControlName="lastName"
            [attr.aria-label]="'PROFILE.ARIA_LABELS.LAST_NAME' | translate"
          />
        </mat-form-field>

        <mat-form-field appearance="fill" class="input-field">
          <mat-label>{{ 'PROFILE.FIELDS.EMAIL' | translate }}</mat-label>
          <input
            matInput
            type="email"
            formControlName="email"
            [attr.aria-label]="'PROFILE.ARIA_LABELS.EMAIL' | translate"
          />
        </mat-form-field>

        <mat-form-field appearance="fill" class="input-field">
          <mat-label>{{ 'PROFILE.FIELDS.PHONE' | translate }}</mat-label>
          <input
            matInput
            formControlName="phone"
            [attr.aria-label]="'PROFILE.ARIA_LABELS.PHONE' | translate"
          />
        </mat-form-field>

        <div class="buttons">
          <button
            mat-stroked-button
            color="primary"
            (click)="toggleEdit()"
            [attr.aria-label]="'PROFILE.ARIA_LABELS.EDIT_BUTTON' | translate"
          >
            {{ isEditing ? ('PROFILE.BUTTONS.CANCEL' | translate) : ('PROFILE.BUTTONS.EDIT_INFO' | translate) }}
          </button>

          <button
            mat-flat-button
            color="accent"
            [disabled]="!isEditing"
            (click)="onSaveChanges()"
            [attr.aria-label]="'PROFILE.ARIA_LABELS.SAVE_BUTTON' | translate"
          >
            {{ 'PROFILE.BUTTONS.SAVE_CHANGES' | translate }}
          </button>
        </div>
      </form>
    </div>

    <div class="profile-right" [attr.aria-label]="'PROFILE.ARIA_LABELS.RIGHT_PANEL' | translate">

      <ng-container *ngIf="userRole === 'authority'">
        <div class="selected-plan-card">
          <h3>
            {{
              (selectedPlan === 'premium' ? 'PROFILE.PLANS.PREMIUM' : 'PROFILE.PLANS.BASIC') | translate
            }} {{ 'PLANS.PLAN' | translate }}
          </h3>
          <p class="plan-price">
            {{ selectedPlan === 'premium' ? ('PROFILE.PLANS.PRICE_PREMIUM' | translate) : ('PROFILE.PLANS.PRICE_BASIC' | translate) }}
          </p>
          <ul class="plan-features">
            <li *ngIf="selectedPlan === 'basic'">
              {{ 'PROFILE.FEATURES.BASIC.0' | translate }}
            </li>
            <li *ngIf="selectedPlan === 'basic'">
              {{ 'PROFILE.FEATURES.BASIC.1' | translate }}
            </li>
            <li *ngIf="selectedPlan === 'basic'">
              {{ 'PROFILE.FEATURES.BASIC.2' | translate }}
            </li>

            <li *ngIf="selectedPlan === 'premium'">
              {{ 'PROFILE.FEATURES.PREMIUM.0' | translate }}
            </li>
            <li *ngIf="selectedPlan === 'premium'">
              {{ 'PROFILE.FEATURES.PREMIUM.1' | translate }}
            </li>
            <li *ngIf="selectedPlan === 'premium'">
              {{ 'PROFILE.FEATURES.PREMIUM.2' | translate }}
            </li>
            <li *ngIf="selectedPlan === 'premium'">
              {{ 'PROFILE.FEATURES.PREMIUM.3' | translate }}
            </li>
            <li *ngIf="selectedPlan === 'premium'">
              {{ 'PROFILE.FEATURES.PREMIUM.4' | translate }}
            </li>
            <li *ngIf="selectedPlan === 'premium'">
              {{ 'PROFILE.FEATURES.PREMIUM.5' | translate }}
            </li>
          </ul>
        </div>
      </ng-container>

      <ng-container *ngIf="userRole === 'citizen'">
        <img
          src="/assets/images/configuration.png"
          [alt]="'PROFILE.IMAGE_ALT' | translate"
        />
      </ng-container>

    </div>
  </div>
</div>
